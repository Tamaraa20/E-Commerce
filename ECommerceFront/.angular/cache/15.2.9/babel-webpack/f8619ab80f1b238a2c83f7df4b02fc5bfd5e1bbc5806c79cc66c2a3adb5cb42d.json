{"ast":null,"code":"var _class;\nimport { FormControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/navigation.service\";\nimport * as i3 from \"../services/user-authentication.service\";\nimport * as i4 from \"../services/cart.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../trending-products/trending-products.component\";\nimport * as i8 from \"../new-arrivals/new-arrivals.component\";\nfunction ProductDetailsComponent_span_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"(Login first)\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailsComponent_li_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 40);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r7, \" \");\n  }\n}\nfunction ProductDetailsComponent_h6_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h6\", 41);\n    i0.ɵɵtext(1, \"Login first, then enter the review.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailsComponent_h6_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h6\", 42);\n    i0.ɵɵtext(1, \"Review/Rating Cannot be empty!.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailsComponent_h6_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h6\", 43);\n    i0.ɵɵtext(1, \"Review saved successfully!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailsComponent_h6_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h6\");\n    i0.ɵɵtext(1, \"No Reviews Yet!\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailsComponent_div_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44)(1, \"div\", 45)(2, \"div\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 46);\n    i0.ɵɵtext(5, \" Reviewed On: \");\n    i0.ɵɵelementStart(6, \"span\", 47);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"div\", 10)(10, \"div\", 18);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const review_r8 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", review_r8.user.firstName, \" \", review_r8.user.lastName, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(8, 4, review_r8.createdAt, \"dd-MMM-yyyy\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", review_r8.value, \" \");\n  }\n}\nexport class ProductDetailsComponent {\n  constructor(activatedRoute, navigationService, userAuthentication, cartService) {\n    this.activatedRoute = activatedRoute;\n    this.navigationService = navigationService;\n    this.userAuthentication = userAuthentication;\n    this.cartService = cartService;\n    this.imageIndex = 1;\n    this.reviewControl = new FormControl('');\n    this.showError = false;\n    this.rewievSaved = false;\n    this.otherReviews = [];\n    this.productQuantity = 1;\n    this.removeCart = false;\n  }\n  ngOnInit() {\n    this.activatedRoute.queryParams.subscribe(params => {\n      let id = params.id;\n      this.navigationService.getProduct(id).subscribe(res => {\n        this.product = res;\n        this.fetchAllReviews();\n      });\n    });\n  }\n  submitReview() {\n    let review = this.reviewControl.value;\n    if (review === '' || review === null) {\n      this.showError = true;\n      return;\n    }\n    let userid = this.userAuthentication.getUser().id;\n    let productid = this.product.productId;\n    this.navigationService.submitReview(userid, productid, review).subscribe(res => {\n      this.rewievSaved = true;\n      this.fetchAllReviews();\n      this.reviewControl.setValue(\"\");\n    });\n  }\n  fetchAllReviews() {\n    this.otherReviews = [];\n    this.navigationService.getAllReviewsOfProduct(this.product.productId).subscribe(res => {\n      for (const review of res) {\n        this.otherReviews.push(review);\n      }\n    });\n  }\n}\n_class = ProductDetailsComponent;\n_class.ɵfac = function ProductDetailsComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.NavigationService), i0.ɵɵdirectiveInject(i3.UserAuthenticationService), i0.ɵɵdirectiveInject(i4.CartService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-product-details\"]],\n  decls: 67,\n  vars: 31,\n  consts: [[1, \"my-container\", \"border\", \"border-dark\", \"py-5\"], [1, \"row\", \"g-0\"], [1, \"col-4\"], [1, \"d-flex\", \"justify-content-center\", \"align-items-center\", \"text-center\"], [\"alt\", \"\", 1, \"w-100\", 3, \"src\"], [1, \"image-thumbnails\", \"mt-4\", \"d-flex\", \"justify-content-between\", \"align-items-center\", \"text-center\", \"m-3\"], [\"alt\", \"Thumbnail image\", 3, \"src\", \"click\"], [1, \"col-8\"], [1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"card-title\", \"text-success\"], [1, \"text-primary\"], [1, \"card-subtitle\", \"text-danger\", \"text-decoration-line-through\"], [1, \"card-subtitle\", \"my-2\", \"text-primary\"], [1, \"d-grid\", \"gap-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-primary\", 3, \"disabled\", \"click\"], [4, \"ngIf\"], [1, \"card-text\"], [1, \"list-group\"], [\"class\", \"list-group-item list-group-item-action\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [1, \"col\", \"p-3\", \"p-md-5\"], [1, \"text-center\", \"py-2\", \"w-100\", \"bg-primary\", \"text-light\"], [1, \"col\", \"m-auto\"], [3, \"category\"], [1, \"col-12\", \"ps-5\", \"pt-4\", \"pb-3\"], [1, \"col-12\"], [1, \"row\", \"g-0\", \"my-5\", \"p-5\", \"my-border\"], [1, \"text-center\", \"py-2\", \"w-100\", \"bg-primary\", \"text-lightr\"], [1, \"mt-4\"], [1, \"w-75\", \"p-2\", 3, \"formControl\"], [1, \"d-flex\", \"align-items-start\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"mt-4\", \"me-5\", 3, \"click\"], [\"class\", \"text-danger mt-4\", 4, \"ngIf\"], [\"class\", \"text-danger\", 4, \"ngIf\"], [\"class\", \"text-success\", 4, \"ngIf\"], [1, \"row\", \"g-0\", \"my-5\", \"p-5\"], [1, \"col\", \"py-5\", \"my-border\"], [\"class\", \"card mt-3\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group-item\", \"list-group-item-action\"], [1, \"text-danger\", \"mt-4\"], [1, \"text-danger\"], [1, \"text-success\"], [1, \"card\", \"mt-3\"], [1, \"card-header\", \"d-flex\", \"justify-content-between\", \"bg-primary\", \"text-light\"], [1, \"card-text\", \"fst-italic\"], [1, \"fw-bold\"]],\n  template: function ProductDetailsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n      i0.ɵɵelement(4, \"img\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 5)(6, \"img\", 6);\n      i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_img_click_6_listener() {\n        return ctx.imageIndex = 1;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"img\", 6);\n      i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_img_click_7_listener() {\n        return ctx.imageIndex = 2;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"img\", 6);\n      i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_img_click_8_listener() {\n        return ctx.imageIndex = 3;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"img\", 6);\n      i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_img_click_9_listener() {\n        return ctx.imageIndex = 4;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"img\", 6);\n      i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_img_click_10_listener() {\n        return ctx.imageIndex = 5;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(11, \"div\", 7)(12, \"div\", 8)(13, \"div\", 9)(14, \"h2\");\n      i0.ɵɵtext(15);\n      i0.ɵɵpipe(16, \"titlecase\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 10)(18, \"h1\", 11);\n      i0.ɵɵtext(19);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"span\", 12);\n      i0.ɵɵtext(21);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"h4\", 13);\n      i0.ɵɵtext(23);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(24, \"div\", 10)(25, \"h6\", 14);\n      i0.ɵɵtext(26);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"div\", 15)(28, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_28_listener() {\n        return ctx.cartService.addToCart(ctx.product);\n      });\n      i0.ɵɵtext(29, \" Add to cart \");\n      i0.ɵɵtemplate(30, ProductDetailsComponent_span_30_Template, 2, 0, \"span\", 17);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(31, \"div\", 10)(32, \"h5\", 18);\n      i0.ɵɵtext(33, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"ul\", 19);\n      i0.ɵɵtemplate(35, ProductDetailsComponent_li_35_Template, 2, 1, \"li\", 20);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(36, \"div\", 21)(37, \"div\", 22)(38, \"h3\", 23);\n      i0.ɵɵtext(39, \" New arrivals \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(40, \"div\", 24);\n      i0.ɵɵelement(41, \"app-new-arrivals\", 25);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(42, \"div\", 21)(43, \"div\", 26)(44, \"h3\", 23);\n      i0.ɵɵtext(45, \" Trending products \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(46, \"div\", 27);\n      i0.ɵɵelement(47, \"app-trending-products\", 25);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(48, \"div\", 28)(49, \"h3\", 29);\n      i0.ɵɵtext(50, \"Give your review\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"h5\", 30);\n      i0.ɵɵtext(52, \"Write your review \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(53, \"textarea\", 31);\n      i0.ɵɵelementStart(54, \"div\", 32)(55, \"button\", 33);\n      i0.ɵɵlistener(\"click\", function ProductDetailsComponent_Template_button_click_55_listener() {\n        return ctx.submitReview();\n      });\n      i0.ɵɵtext(56, \"Saved review\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(57, \"div\");\n      i0.ɵɵtemplate(58, ProductDetailsComponent_h6_58_Template, 2, 0, \"h6\", 34);\n      i0.ɵɵtemplate(59, ProductDetailsComponent_h6_59_Template, 2, 0, \"h6\", 35);\n      i0.ɵɵtemplate(60, ProductDetailsComponent_h6_60_Template, 2, 0, \"h6\", 36);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(61, \"div\", 37)(62, \"div\", 38)(63, \"h3\");\n      i0.ɵɵtext(64, \"Other Reviews\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(65, ProductDetailsComponent_h6_65_Template, 2, 0, \"h6\", 17);\n      i0.ɵɵtemplate(66, ProductDetailsComponent_div_66_Template, 12, 7, \"div\", 39);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵpropertyInterpolate3(\"src\", \"../../assets/Images/\", ctx.product.productCategory.subCategory, \"/\", ctx.product.productId, \"/\", ctx.imageIndex, \".jpg\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(2);\n      i0.ɵɵpropertyInterpolate2(\"src\", \"../../assets/Images/\", ctx.product.productCategory.subCategory, \"/\", ctx.product.productId, \"/1.jpg\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate2(\"src\", \"../../assets/Images/\", ctx.product.productCategory.subCategory, \"/\", ctx.product.productId, \"/2.jpg\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate2(\"src\", \"../../assets/Images/\", ctx.product.productCategory.subCategory, \"/\", ctx.product.productId, \"/3.jpg\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate2(\"src\", \"../../assets/Images/\", ctx.product.productCategory.subCategory, \"/\", ctx.product.productId, \"/4.jpg\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate2(\"src\", \"../../assets/Images/\", ctx.product.productCategory.subCategory, \"/\", ctx.product.productId, \"/5.jpg\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(16, 29, ctx.product.title));\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\" \", ctx.cartService.applyDiscount(ctx.product.price, ctx.product.offer.discount), \"$ \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"-\", ctx.product.offer.discount, \" %\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", ctx.product.price, \"$ \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", ctx.product.quantity, \" products are available \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.userAuthentication.isLoggedIn());\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.userAuthentication.isLoggedIn());\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.product.description.split(\". \"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"category\", ctx.product.productCategory);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"category\", ctx.product.productCategory);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"formControl\", ctx.reviewControl);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", !ctx.userAuthentication.isLoggedIn());\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showError);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.rewievSaved);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.otherReviews.length === 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.otherReviews);\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i6.DefaultValueAccessor, i6.NgControlStatus, i6.FormControlDirective, i7.TrendingProductsComponent, i8.NewArrivalsComponent, i5.TitleCasePipe, i5.DatePipe],\n  styles: [\".image-thumbnails[_ngcontent-%COMP%] > img[_ngcontent-%COMP%] {\\r\\n  width: 17%;\\r\\n  cursor: pointer;\\r\\n  transition: transform 100ms ease-in-out;\\r\\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.5);\\r\\n}\\r\\n\\r\\n.image-thumbnails[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]:hover {\\r\\n  transform: scale(1.08);\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdC1kZXRhaWxzL3Byb2R1Y3QtZGV0YWlscy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsVUFBVTtFQUNWLGVBQWU7RUFDZix1Q0FBdUM7RUFDdkMsMENBQTBDO0FBQzVDOztBQUVBO0VBQ0Usc0JBQXNCO0FBQ3hCIiwic291cmNlc0NvbnRlbnQiOlsiLmltYWdlLXRodW1ibmFpbHM+aW1nIHtcclxuICB3aWR0aDogMTclO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMTAwbXMgZWFzZS1pbi1vdXQ7XHJcbiAgYm94LXNoYWRvdzogMHB4IDBweCA0cHggcmdiYSgwLCAwLCAwLCAwLjUpO1xyXG59XHJcblxyXG4uaW1hZ2UtdGh1bWJuYWlscz5pbWc6aG92ZXIge1xyXG4gIHRyYW5zZm9ybTogc2NhbGUoMS4wOCk7XHJcbn1cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","i0","ProductDetailsComponent","constructor","activatedRoute","navigationService","userAuthentication","cartService","ngOnInit","queryParams","subscribe","params","id","getProduct","res","product","fetchAllReviews","submitReview","review","reviewControl","value","showError","userid","getUser","productid","productId","rewievSaved","setValue","otherReviews","getAllReviewsOfProduct","push","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\tamar\\Desktop\\ECommerce\\ECommerceFront\\src\\app\\product-details\\product-details.component.ts","C:\\Users\\tamar\\Desktop\\ECommerce\\ECommerceFront\\src\\app\\product-details\\product-details.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Product } from '../models/product';\nimport { FormControl } from '@angular/forms';\nimport { Review } from '../models/review';\nimport { ActivatedRoute } from '@angular/router';\nimport { NavigationService } from '../services/navigation.service';\nimport { UserAuthenticationService } from '../services/user-authentication.service';\nimport { CartService } from '../services/cart.service';\n\n@Component({\n  selector: 'app-product-details',\n  templateUrl: './product-details.component.html',\n  styleUrls: ['./product-details.component.css']\n})\nexport class ProductDetailsComponent  implements OnInit{\n\n  imageIndex: number = 1;\n   product !: Product;\n  reviewControl = new FormControl('');\n  showError = false;\n  rewievSaved = false;\n  otherReviews: Review[] = [];\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private navigationService: NavigationService,\n    public userAuthentication: UserAuthenticationService,\n    public cartService: CartService,\n  ) { }\n\n  ngOnInit(): void {\n    this.activatedRoute.queryParams.subscribe((params: any) => {\n      let id = params.id;\n      this.navigationService.getProduct(id).subscribe((res: any) => {\n        this.product = res;\n        this.fetchAllReviews();\n      })\n    })\n\n  }\n\n  submitReview() {\n    let review = this.reviewControl.value;\n    if (review === '' || review === null) {\n      this.showError = true\n      return\n    }\n    let userid = this.userAuthentication.getUser().id;\n    let productid = this.product.productId;\n\n    this.navigationService.submitReview(userid, productid, review).subscribe((res) => {\n      this.rewievSaved = true;\n      this.fetchAllReviews();\n      this.reviewControl.setValue(\"\");\n    })\n  }\n\n  fetchAllReviews() {\n    this.otherReviews = [];\n    this.navigationService.\n      getAllReviewsOfProduct(this.product.productId)\n      .subscribe((res: any) => {\n        for (const review of res) {\n          this.otherReviews.push(review);\n        }\n      })\n\n  }\n\n  productData:undefined | Product;\n  productQuantity:number=1;\n  removeCart=false;\n  cartData:Product|undefined;\n\n}\n","<div class=\"my-container border border-dark py-5\">\r\n  <div class=\"row g-0\">\r\n    <!-- profile image of products -->\r\n    <div class=\"col-4\">\r\n      <div class=\"d-flex justify-content-center align-items-center text-center\">\r\n        <img src=\"../../assets/Images/{{product.productCategory.subCategory}}/{{product.productId}}/{{imageIndex}}.jpg\"\r\n          alt=\"\" class=\"w-100\" />\r\n      </div>\r\n\r\n      <div class=\"image-thumbnails mt-4 d-flex justify-content-between align-items-center text-center m-3\">\r\n        <img src=\"../../assets/Images/{{product.productCategory.subCategory}}/{{product.productId}}/1.jpg\"\r\n          alt=\"Thumbnail image\" (click)=\"imageIndex = 1\" />\r\n        <img src=\"../../assets/Images/{{product.productCategory.subCategory}}/{{product.productId}}/2.jpg\"\r\n          alt=\"Thumbnail image\" (click)=\"imageIndex = 2\" />\r\n        <img src=\"../../assets/Images/{{product.productCategory.subCategory}}/{{product.productId}}/3.jpg\"\r\n          alt=\"Thumbnail image\" (click)=\"imageIndex = 3\" />\r\n        <img src=\"../../assets/Images/{{product.productCategory.subCategory}}/{{product.productId}}/4.jpg\"\r\n          alt=\"Thumbnail image\" (click)=\"imageIndex = 4\" />\r\n        <img src=\"../../assets/Images/{{product.productCategory.subCategory}}/{{product.productId}}/5.jpg\"\r\n          alt=\"Thumbnail image\" (click)=\"imageIndex = 5\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- details of products -->\r\n    <div class=\"col-8\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">\r\n          <h2>{{product.title | titlecase}}</h2>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <h1 class=\"card-title text-success\">\r\n            {{cartService.applyDiscount(product.price, product.offer.discount)}}$\r\n          </h1>\r\n          <span class=\"text-primary\">-{{product.offer.discount}} %</span>\r\n          <h4 class=\"card-subtitle text-danger text-decoration-line-through\">\r\n            {{product.price}}$\r\n          </h4>\r\n        </div>\r\n\r\n        <div class=\"card-body\">\r\n          <h6 class=\"card-subtitle my-2 text-primary\">\r\n            {{product.quantity}} products are available\r\n          </h6>\r\n          <div class=\"d-grid gap-2\">\r\n            <button type=\"button\" class=\"btn btn-outline-primary\" [disabled]=\"!userAuthentication.isLoggedIn()\"\r\n              (click)=\"this.cartService.addToCart(product)\">\r\n              Add to cart\r\n              <span *ngIf=\"!userAuthentication.isLoggedIn()\">(Login first)</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-text\">Description</h5>\r\n          <ul class=\"list-group\">\r\n            <li class=\"list-group-item list-group-item-action\" *ngFor=\"let item of product.description.split('. ')\">\r\n              {{ item }}\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!--  New arrivals -->\r\n  <!-- <div class=\"conatiner m-auto\"> -->\r\n    <!-- <div class=\"row\">\r\n      <div class=\"col p-5\">\r\n        <h3 class=\"border border-secondary text-center py-2 my-rounded-corner w-25\">\r\n          New arrivals\r\n        </h3>\r\n        <div class=\"col m-auto\">\r\n          <app-new-arrivals [category]=\"product.productCategory\"></app-new-arrivals>\r\n        </div>\r\n      </div>\r\n    </div> -->\r\n  <!-- </div> -->\r\n\r\n  <div class=\"row\">\r\n    <div class=\"col p-3 p-md-5\">\r\n      <h3 class=\"text-center py-2 w-100 bg-primary text-light\">\r\n        New arrivals\r\n      </h3>\r\n      <div class=\"col m-auto\">\r\n        <app-new-arrivals [category]=\"product.productCategory\"></app-new-arrivals>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <!-- trending -->\r\n  <div class=\"row \">\r\n    <div class=\"col-12 ps-5 pt-4 pb-3\">\r\n      <h3 class=\" text-center py-2 w-100 bg-primary text-light\">\r\n        Trending products\r\n\r\n      </h3>\r\n      <div class=\"col-12\">\r\n        <app-trending-products [category]=\"product.productCategory\"></app-trending-products>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- review -->\r\n  <div class=\"row g-0 my-5 p-5 my-border\">\r\n    <h3 class=\" text-center py-2 w-100 bg-primary text-lightr\">Give your review</h3>\r\n    <h5 class=\"mt-4\">Write your review </h5>\r\n    <textarea class=\"w-75 p-2\" [formControl]=\"reviewControl\"></textarea>\r\n    <div class=\"d-flex align-items-start\">\r\n      <button type=\"button\" class=\"btn btn-outline-secondary mt-4 me-5\" (click)=\"submitReview()\">Saved review</button>\r\n\r\n      <div>\r\n        <h6 class=\"text-danger mt-4\" *ngIf=\"!userAuthentication.isLoggedIn()\">Login first, then enter the review.</h6>\r\n        <h6 class=\"text-danger\" *ngIf=\"showError\">Review/Rating Cannot be empty!.</h6>\r\n        <h6 class=\"text-success\" *ngIf=\"rewievSaved\">Review saved successfully!</h6>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n    <!-- other review -->\r\n    <div class=\"row g-0 my-5 p-5 \">\r\n    <div class=\"col py-5 my-border\">\r\n      <h3>Other Reviews</h3>\r\n      <h6 *ngIf=\"otherReviews.length===0\">No Reviews Yet!</h6>\r\n      <div class=\"card mt-3\" *ngFor=\"let review of otherReviews\">\r\n        <div class=\"card-header d-flex justify-content-between bg-primary text-light\">\r\n          <div class=\"card-text\">\r\n            {{review.user.firstName}}\r\n            {{review.user.lastName}}\r\n          </div>\r\n          <div class=\"card-text fst-italic\">\r\n            Reviewed On: <span class=\"fw-bold\">\r\n              {{review.createdAt| date:\"dd-MMM-yyyy\"}}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"card-text\">\r\n            {{review.value}}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}