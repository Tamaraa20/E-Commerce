{"ast":null,"code":"var _class;\nimport { Subject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./user-authentication.service\";\nimport * as i2 from \"./navigation.service\";\nexport class CartService {\n  constructor(userAuthentication, navigationService) {\n    this.userAuthentication = userAuthentication;\n    this.navigationService = navigationService;\n    this.changeCart = new Subject();\n  }\n  applyDiscount(price, discount) {\n    let finalPrice = price - price * (discount / 100);\n    return finalPrice;\n  }\n  addToCart(product) {\n    let productid = product.productId;\n    let userid = this.userAuthentication.getUser().id;\n    this.navigationService.addToCard(userid, productid).subscribe(res => {\n      if (res.toString() === 'inserted') this.changeCart.next(1);\n    });\n  }\n}\n_class = CartService;\n_class.ɵfac = function CartService_Factory(t) {\n  return new (t || _class)(i0.ɵɵinject(i1.UserAuthenticationService), i0.ɵɵinject(i2.NavigationService));\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AAIA,SAASA,OAAO,QAAQ,MAAM;;;;AAK9B,OAAM,MAAOC,WAAW;EAGtBC,YAAmBC,kBAA6C,EACtDC,iBAAoC;IAD3B,uBAAkB,GAAlBD,kBAAkB;IAC3B,sBAAiB,GAAjBC,iBAAiB;IAH3B,eAAU,GAAG,IAAIJ,OAAO,EAAE;EAGwB;EAElDK,aAAa,CAACC,KAAa,EAAEC,QAAgB;IAC3C,IAAIC,UAAU,GAAWF,KAAK,GAAGA,KAAK,IAAIC,QAAQ,GAAG,GAAG,CAAC;IACzD,OAAOC,UAAU;EACnB;EAEAC,SAAS,CAACC,OAAgB;IACxB,IAAIC,SAAS,GAAGD,OAAO,CAACE,SAAS;IACjC,IAAIC,MAAM,GAAG,IAAI,CAACV,kBAAkB,CAACW,OAAO,EAAE,CAACC,EAAE;IAEjD,IAAI,CAACX,iBAAiB,CAACY,SAAS,CAACH,MAAM,EAAEF,SAAS,CAAC,CAACM,SAAS,CAAEC,GAAG,IAAI;MACpE,IAAIA,GAAG,CAACC,QAAQ,EAAE,KAAK,UAAU,EAAE,IAAI,CAACC,UAAU,CAACC,IAAI,CAAC,CAAC,CAAC;IAC5D,CAAC,CAAC;EACJ;;SAlBWpB,WAAW;;mBAAXA,MAAW;AAAA;;SAAXA,MAAW;EAAAqB,SAAXrB,MAAW;EAAAsB,YAFV;AAAM","names":["Subject","CartService","constructor","userAuthentication","navigationService","applyDiscount","price","discount","finalPrice","addToCart","product","productid","productId","userid","getUser","id","addToCard","subscribe","res","toString","changeCart","next","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\tamar\\Desktop\\ECommerce\\ECommerceFront\\src\\app\\services\\cart.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Product } from '../models/product';\nimport { UserAuthenticationService } from './user-authentication.service';\nimport { NavigationService } from './navigation.service';\nimport { Subject } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CartService {\n  changeCart = new Subject();\n\n  constructor(public userAuthentication: UserAuthenticationService,\n    private navigationService: NavigationService) { }\n\n  applyDiscount(price: number, discount: number): number {\n    let finalPrice: number = price - price * (discount / 100);\n    return finalPrice;\n  }\n\n  addToCart(product: Product) {\n    let productid = product.productId\n    let userid = this.userAuthentication.getUser().id;\n\n    this.navigationService.addToCard(userid, productid).subscribe((res) => {\n      if (res.toString() === 'inserted') this.changeCart.next(1)\n    })\n  }\n\n\n\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}