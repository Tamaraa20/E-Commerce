{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/navigation.service\";\nimport * as i2 from \"../services/user-authentication.service\";\nimport * as i3 from \"../services/cart.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../product/product.component\";\nfunction CartComponent_div_5_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelement(1, \"app-product\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cartItem_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"view\", \"prevcartitem\")(\"product\", cartItem_r3.product);\n  }\n}\nfunction CartComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"span\", 6);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 7);\n    i0.ɵɵtext(5, \"Price Paid : \");\n    i0.ɵɵelementStart(6, \"span\", 8);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 9)(9, \"div\", 10);\n    i0.ɵɵtemplate(10, CartComponent_div_5_div_10_Template, 2, 2, \"div\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cart_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Items: \", cart_r1.cartItems.length, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.cartService.calculatePrice(cart_r1), \"$ \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", cart_r1.cartItems);\n  }\n}\nexport class CartComponent {\n  constructor(navigationService, userAuthentication, cartService) {\n    this.navigationService = navigationService;\n    this.userAuthentication = userAuthentication;\n    this.cartService = cartService;\n    this.usersCart = {\n      id: 0,\n      user: this.userAuthentication.getUser(),\n      cartItems: [],\n      ordered: false,\n      orderedOn: ''\n    };\n    this.userPaymentInfo = {\n      id: 0,\n      user: this.userAuthentication.getUser(),\n      paymentMethod: {\n        id: 0,\n        type: '',\n        provider: '',\n        available: false,\n        reason: ''\n      },\n      totalAmount: 0,\n      shipingCharges: 0,\n      amountReduced: 0,\n      amountPaid: 0,\n      createdAt: ''\n    };\n    this.usersPreviousCarts = [];\n  }\n  ngOnInit() {\n    // getcart\n    this.navigationService.getActiveCartOfUser(this.userAuthentication.getUser().id).subscribe(res => {\n      this.usersCart = res;\n      // calculate payment\n      this.cartService.calculatePayment(this.usersCart, this.userPaymentInfo);\n    });\n    // get previus carts\n    this.navigationService.getAllPreviousCarts(this.userAuthentication.getUser().id).subscribe(res => {\n      this.usersPreviousCarts = res;\n    });\n  }\n  deleteCartItem(cartItemId) {\n    this.navigationService.deleteCartItem(cartItemId).subscribe(response => {\n      console.log(response);\n    }, error => {\n      console.error(error);\n    });\n    window.location.reload();\n  }\n}\n_class = CartComponent;\n_class.ɵfac = function CartComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.NavigationService), i0.ɵɵdirectiveInject(i2.UserAuthenticationService), i0.ɵɵdirectiveInject(i3.CartService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-cart\"]],\n  decls: 6,\n  vars: 1,\n  consts: [[1, \"my-container\", \"mx-auto\", \"border\", \"border-dark\", \"py-5\"], [1, \"mt-5\", \"p-4\", \"border\", \"my-rounded-corner\"], [1, \"w-100\", \"text-center\", \"py-2\", \"my-5\", \"my-rounded-corner\"], [\"class\", \"card mb-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"card\", \"mb-5\"], [1, \"card-header\", \"d-flex\", \"fw-bold\", \"justify-content-between\", \"align-items-center\", \"bg-primary\", \"text-light\"], [1, \"count\"], [1, \"price\"], [1, \"fs-5\"], [1, \"card-body\", \"px-4\", \"py-2\"], [1, \"row\", \"g-0\"], [\"class\", \"col-2 px-2 py-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-2\", \"px-2\", \"py-2\"], [3, \"view\", \"product\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h3\", 2)(3, \"b\");\n      i0.ɵɵtext(4, \"Previous Carts\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(5, CartComponent_div_5_Template, 11, 3, \"div\", 3);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.usersPreviousCarts);\n    }\n  },\n  dependencies: [i4.NgForOf, i5.ProductComponent],\n  styles: [\".my-container[_ngcontent-%COMP%] {\\r\\n  max-width: 100%;\\r\\n}\\r\\n\\r\\n.my-shadow[_ngcontent-%COMP%] {\\r\\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.my-rounded-corner[_ngcontent-%COMP%] {\\r\\n  border-radius: 1rem;\\r\\n}\\r\\n\\r\\n.table[_ngcontent-%COMP%]{\\r\\n  background: white;\\r\\n}\\r\\n\\r\\n.txt[_ngcontent-%COMP%]{\\r\\n  \\r\\n   color: white;\\r\\n  \\r\\nborder-radius: 5px;\\r\\n\\r\\n}\\r\\n\\r\\n.current-cart-items[_ngcontent-%COMP%]{\\r\\n  background-color: white;\\r\\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);\\r\\n  border-radius: 1rem;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FydC9jYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsMkNBQTJDO0FBQzdDOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsNkJBQTZCO0dBQzVCLFlBQVk7RUFDYixrQkFBa0I7QUFDcEIsa0JBQWtCOztBQUVsQjs7QUFFQTtFQUNFLHVCQUF1QjtFQUN2QiwyQ0FBMkM7RUFDM0MsbUJBQW1CO0FBQ3JCIiwic291cmNlc0NvbnRlbnQiOlsiLm15LWNvbnRhaW5lciB7XHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4ubXktc2hhZG93IHtcclxuICBib3gtc2hhZG93OiAwcHggMHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xyXG59XHJcblxyXG4ubXktcm91bmRlZC1jb3JuZXIge1xyXG4gIGJvcmRlci1yYWRpdXM6IDFyZW07XHJcbn1cclxuXHJcbi50YWJsZXtcclxuICBiYWNrZ3JvdW5kOiB3aGl0ZTtcclxufVxyXG5cclxuLnR4dHtcclxuICAvKiBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgKi9cclxuICAgY29sb3I6IHdoaXRlO1xyXG4gIC8qIGNvbG9yOiBibGFjazsgKi9cclxuYm9yZGVyLXJhZGl1czogNXB4O1xyXG5cclxufVxyXG5cclxuLmN1cnJlbnQtY2FydC1pdGVtc3tcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICBib3gtc2hhZG93OiAwcHggMHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xyXG4gIGJvcmRlci1yYWRpdXM6IDFyZW07XHJcbn1cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;IA6DUA,+BAAqE;IACnEA,kCAAgF;IAClFA,iBAAM;;;;IADSA,eAAuB;IAAvBA,qCAAuB;;;;;IAX5CA,8BAA+D;IAEvCA,YAAgC;IAAAA,iBAAO;IAC3DA,+BAAoB;IAAAA,6BAClB;IAAAA,+BAAmB;IAAAA,YAAsC;IAAAA,iBAAO;IAIpEA,8BAAmC;IAE/BA,uEAEM;IACRA,iBAAM;;;;;IAXcA,eAAgC;IAAhCA,8DAAgC;IAE/BA,eAAsC;IAAtCA,2EAAsC;IAMPA,eAAiB;IAAjBA,2CAAiB;;;AChD7E,OAAM,MAAOC,aAAa;EA4BxBC,YACSC,iBAAoC,EACpCC,kBAA6C,EAC7CC,WAAwB;IAFxB,sBAAiB,GAAjBF,iBAAiB;IACjB,uBAAkB,GAAlBC,kBAAkB;IAClB,gBAAW,GAAXC,WAAW;IA9BpB,cAAS,GAAS;MAChBC,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,IAAI,CAACH,kBAAkB,CAACI,OAAO,EAAE;MACvCC,SAAS,EAAE,EAAE;MACbC,OAAO,EAAE,KAAK;MACdC,SAAS,EAAE;KACZ;IAED,oBAAe,GAAY;MACzBL,EAAE,EAAE,CAAC;MACLC,IAAI,EAAE,IAAI,CAACH,kBAAkB,CAACI,OAAO,EAAE;MACvCI,aAAa,EAAE;QACbN,EAAE,EAAE,CAAC;QACLO,IAAI,EAAE,EAAE;QACRC,QAAQ,EAAE,EAAE;QACZC,SAAS,EAAE,KAAK;QAChBC,MAAM,EAAE;OACT;MACDC,WAAW,EAAE,CAAC;MACdC,cAAc,EAAE,CAAC;MACjBC,aAAa,EAAE,CAAC;MAChBC,UAAU,EAAE,CAAC;MACbC,SAAS,EAAE;KACZ;IACD,uBAAkB,GAAW,EAAE;EAO3B;EAGJC,QAAQ;IAEN;IACA,IAAI,CAACnB,iBAAiB,CAACoB,mBAAmB,CAAC,IAAI,CAACnB,kBAAkB,CAACI,OAAO,EAAE,CAACF,EAAE,CAAC,CAC7EkB,SAAS,CAAEC,GAAQ,IAAI;MACtB,IAAI,CAACC,SAAS,GAAGD,GAAG;MAEpB;MACA,IAAI,CAACpB,WAAW,CAACsB,gBAAgB,CAC/B,IAAI,CAACD,SAAS,EAAE,IAAI,CAACE,eAAe,CACrC;IACH,CAAC,CAAC;IACJ;IACA,IAAI,CAACzB,iBAAiB,CAAC0B,mBAAmB,CAAC,IAAI,CAACzB,kBAAkB,CAACI,OAAO,EAAE,CAACF,EAAE,CAAC,CAC7EkB,SAAS,CAAEC,GAAQ,IAAI;MACtB,IAAI,CAACK,kBAAkB,GAAGL,GAAG;IAC/B,CAAC,CAAC;EACN;EAEAM,cAAc,CAACC,UAAkB;IAC/B,IAAI,CAAC7B,iBAAiB,CAAC4B,cAAc,CAACC,UAAU,CAAC,CAACR,SAAS,CACxDS,QAAQ,IAAI;MACXC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;IACvB,CAAC,EACAG,KAAK,IAAI;MACRF,OAAO,CAACE,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CACF;IACDC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;EAC1B;;SAhEWtC,aAAa;;mBAAbA,MAAa;AAAA;;QAAbA,MAAa;EAAAuC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDb1B5C,8BAA2D;MAkDOA,8BAAc;MAAAA,iBAAI;MAChFA,+DAeM;MACRA,iBAAM;;;MAhBoCA,eAAqB;MAArBA,gDAAqB","names":["i0","CartComponent","constructor","navigationService","userAuthentication","cartService","id","user","getUser","cartItems","ordered","orderedOn","paymentMethod","type","provider","available","reason","totalAmount","shipingCharges","amountReduced","amountPaid","createdAt","ngOnInit","getActiveCartOfUser","subscribe","res","usersCart","calculatePayment","userPaymentInfo","getAllPreviousCarts","usersPreviousCarts","deleteCartItem","cartItemId","response","console","log","error","window","location","reload","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\tamar\\Desktop\\ECommerce\\ECommerceFront\\src\\app\\cart\\cart.component.html","C:\\Users\\tamar\\Desktop\\ECommerce\\ECommerceFront\\src\\app\\cart\\cart.component.ts"],"sourcesContent":["<div class=\"my-container mx-auto border border-dark py-5 \">\n  <!-- <div class=\"p-4 border my-rounded-corner\">\n    <h2 class=\"pt-4 d-flex justify-content-center align-items-center\"> <b>Current Cart</b></h2>\n    <div class=\"mt-5 mb-5\">\n      <div class=\"d-grid w-50 mx-auto \">\n        <button class=\"btn btn-primary fs-4\" type=\"button\" routerLink=\"/orders\">Order</button>\n      </div>\n      <table class=\"table w-50 mx-auto table-border table-hover my-shadow\">\n        <tbody>\n          <tr>\n            <td>Total Items</td>\n            <td class=\"fs-5 fw-bold\"> {{usersCart.cartItems.length}}</td>\n          </tr>\n          <tr>\n            <td>Total Price</td>\n            <td class=\"fs-5 fw-bold text-danger\"> {{userPaymentInfo.totalAmount}}$ </td>\n          </tr>\n          <tr>\n            <td>Shipping Charges</td>\n            <td class=\"fs-5 fw-bold text-danger\">{{userPaymentInfo.shipingCharges}} $</td>\n          </tr>\n          <tr>\n            <td>Discount</td>\n            <td class=\"fs-5 fw-bold text-primary\">{{userPaymentInfo.amountReduced}}$ </td>\n          </tr>\n          <tr>\n            <td>You Have to Pay</td>\n            <td class=\"fs-5 fw-bold text-primary\">{{userPaymentInfo.amountPaid}}$ </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n\n    <div class=\"current-cart-items w-50 mx-auto mt-5  my-rounded-corner\">\n      <h4 class=\"txt p-3 text-center bg-primary\">Cart Items</h4>\n      <div class=\"row mt-4 g-0 product\">\n        <div class=\"col py-3 px-2 \" *ngFor=\"let cartItem of usersCart.cartItems\">\n          <div class=\"d-flex justify-content-between align-items-start\">\n            <app-product [view]=\"'currcartitem'\" [product]=\"cartItem.product\"></app-product>\n            <button class=\"btn m-0 p-0\" (click)=\"deleteCartItem(cartItem.id)\"><i class=\"bi bi-trash3\"></i></button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div> -->\n\n\n\n\n  <div class=\"mt-5 p-4 border my-rounded-corner \">\n    <h3 class=\"w-100 text-center py-2 my-5 my-rounded-corner\"> <b>Previous Carts</b></h3>\n    <div class=\"card mb-5\" *ngFor=\"let cart of usersPreviousCarts\">\n      <div class=\"card-header d-flex fw-bold justify-content-between align-items-center bg-primary text-light\">\n        <span class=\"count\">Items: {{cart.cartItems.length}}</span>\n        <span class=\"price\">Price Paid :\n          <span class=\"fs-5\">{{cartService.calculatePrice(cart)}}$ </span>\n        </span>\n      </div>\n\n      <div class=\"card-body px-4 py-2  \">\n        <div class=\"row g-0\">\n          <div class=\"col-2 px-2 py-2\" *ngFor=\"let cartItem of cart.cartItems\">\n            <app-product [view]=\"'prevcartitem'\" [product]=\"cartItem.product\"></app-product>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component } from '@angular/core';\nimport { Cart } from '../models/cart';\nimport { Payment } from '../models/payment';\nimport { NavigationService } from '../services/navigation.service';\nimport { Router } from '@angular/router';\nimport { UserAuthenticationService } from '../services/user-authentication.service';\nimport { CartService } from '../services/cart.service';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent {\n  usersCart: Cart = {\n    id: 0,\n    user: this.userAuthentication.getUser(),\n    cartItems: [],\n    ordered: false,\n    orderedOn: ''\n  }\n\n  userPaymentInfo: Payment = {\n    id: 0,\n    user: this.userAuthentication.getUser(),\n    paymentMethod: {\n      id: 0,\n      type: '',\n      provider: '',\n      available: false,\n      reason: ''\n    },\n    totalAmount: 0,\n    shipingCharges: 0,\n    amountReduced: 0,\n    amountPaid: 0,\n    createdAt: ''\n  }\n  usersPreviousCarts: Cart[] = [];\n  data: any;\n\n  constructor(\n    public navigationService: NavigationService,\n    public userAuthentication: UserAuthenticationService,\n    public cartService: CartService\n  ) { }\n\n\n  ngOnInit(): void {\n\n    // getcart\n    this.navigationService.getActiveCartOfUser(this.userAuthentication.getUser().id)\n      .subscribe((res: any) => {\n        this.usersCart = res;\n\n        // calculate payment\n        this.cartService.calculatePayment(\n          this.usersCart, this.userPaymentInfo\n        )\n      });\n    // get previus carts\n    this.navigationService.getAllPreviousCarts(this.userAuthentication.getUser().id)\n      .subscribe((res: any) => {\n        this.usersPreviousCarts = res;\n      })\n  }\n\n  deleteCartItem(cartItemId: number): void {\n    this.navigationService.deleteCartItem(cartItemId).subscribe(\n      (response) => {\n        console.log(response);\n      },\n      (error) => {\n        console.error(error);\n      }\n    );\n    window.location.reload();\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}