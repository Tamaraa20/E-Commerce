{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/navigation.service\";\nimport * as i2 from \"../services/user-authentication.service\";\nimport * as i3 from \"../services/cart.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../product/product.component\";\nfunction CartComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"div\", 17);\n    i0.ɵɵelement(2, \"app-product\", 18);\n    i0.ɵɵelementStart(3, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_40_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const cartItem_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.deleteCartItem(cartItem_r2.id));\n    });\n    i0.ɵɵelement(4, \"i\", 20);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cartItem_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"view\", \"currcartitem\")(\"product\", cartItem_r2.product);\n  }\n}\nfunction CartComponent_div_44_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30);\n    i0.ɵɵelement(1, \"app-product\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cartItem_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"view\", \"prevcartitem\")(\"product\", cartItem_r7.product);\n  }\n}\nfunction CartComponent_div_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21)(1, \"div\", 22)(2, \"span\", 23);\n    i0.ɵɵtext(3, \"Ordered On : \");\n    i0.ɵɵelementStart(4, \"span\", 24);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"span\", 25);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 26);\n    i0.ɵɵtext(10, \"Price Paid : \");\n    i0.ɵɵelementStart(11, \"span\", 24);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(13, \"div\", 27)(14, \"div\", 28);\n    i0.ɵɵtemplate(15, CartComponent_div_44_div_15_Template, 2, 2, \"div\", 29);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cart_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(6, 4, cart_r5.orderedOn, \"dd-MMM-YYYY\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Items: \", cart_r5.cartItems.length, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.cartService.calculatePrice(cart_r5), \"$ \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", cart_r5.cartItems);\n  }\n}\nexport class CartComponent {\n  constructor(navigationService, userAuthentication, cartService) {\n    this.navigationService = navigationService;\n    this.userAuthentication = userAuthentication;\n    this.cartService = cartService;\n    this.usersCart = {\n      id: 0,\n      user: this.userAuthentication.getUser(),\n      cartItems: [],\n      ordered: false,\n      orderedOn: ''\n    };\n    this.userPaymentInfo = {\n      id: 0,\n      user: this.userAuthentication.getUser(),\n      paymentMethod: {\n        id: 0,\n        type: '',\n        provider: '',\n        available: false,\n        reason: ''\n      },\n      totalAmount: 0,\n      shipingCharges: 0,\n      amountReduced: 0,\n      amountPaid: 0,\n      createdAt: ''\n    };\n    this.usersPreviousCarts = [];\n  }\n  ngOnInit() {\n    // getcart\n    this.navigationService.getActiveCartOfUser(this.userAuthentication.getUser().id).subscribe(res => {\n      this.usersCart = res;\n      // calculate payment\n      this.cartService.calculatePayment(this.usersCart, this.userPaymentInfo);\n    });\n    // get previus carts\n    this.navigationService.getAllPreviousCarts(this.userAuthentication.getUser().id).subscribe(res => {\n      this.usersPreviousCarts = res;\n    });\n  }\n  deleteCartItem(cartItemId) {\n    this.navigationService.deleteCartItem(cartItemId).subscribe(response => {\n      console.log(response);\n    }, error => {\n      console.error(error);\n    });\n    window.location.reload();\n  }\n}\n_class = CartComponent;\n_class.ɵfac = function CartComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.NavigationService), i0.ɵɵdirectiveInject(i2.UserAuthenticationService), i0.ɵɵdirectiveInject(i3.CartService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-cart\"]],\n  decls: 45,\n  vars: 7,\n  consts: [[1, \"my-container\", \"mx-auto\", \"border\", \"border-dark\", \"py-5\"], [1, \"p-4\", \"border\", \"my-rounded-corner\"], [1, \"py-2\", \"d-flex\", \"justify-content-center\", \"align-items-center\"], [1, \"mt-5\"], [1, \"d-grid\", \"w-50\", \"mx-auto\", \"mb-3\"], [\"type\", \"button\", \"routerLink\", \"/orders\", 1, \"btn\", \"btn-outline-success\", \"fs-4\"], [1, \"table\", \"w-50\", \"mx-auto\", \"table-border\", \"table-hover\", \"my-shadow\"], [1, \"fs-5\", \"fw-bold\"], [1, \"fs-5\", \"fw-bold\", \"text-danger\"], [1, \"fs-5\", \"fw-bold\", \"text-success\"], [1, \"current-cart-items\", \"w-75\", \"mx-auto\", \"mt-5\"], [1, \"row\", \"mt-4\", \"g-0\", \"product\"], [\"class\", \"col-6 py-3 px-2 \", 4, \"ngFor\", \"ngForOf\"], [1, \"mt-5\", \"p-4\", \"border\", \"my-rounded-corner\"], [1, \"w-25\", \"border\", \"text-center\", \"py-2\", \"mb-5\", \"my-rounded-corner\"], [\"class\", \"card mb-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-6\", \"py-3\", \"px-2\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-start\"], [3, \"view\", \"product\"], [1, \"btn\", \"m-0\", \"p-0\", 3, \"click\"], [1, \"bi\", \"bi-trash3\"], [1, \"card\", \"mb-5\"], [1, \"card-header\", \"d-flex\", \"fw-bold\", \"justify-content-between\", \"align-items-center\"], [1, \"time\"], [1, \"fs-5\"], [1, \"count\"], [1, \"price\"], [1, \"card-body\", \"px-4\", \"py-2\"], [1, \"row\", \"g-0\"], [\"class\", \"col-2 px-2 py-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-2\", \"px-2\", \"py-2\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2)(3, \"b\");\n      i0.ɵɵtext(4, \"Current Cart\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 3)(6, \"div\", 4)(7, \"button\", 5);\n      i0.ɵɵtext(8, \"Order\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"table\", 6)(10, \"tbody\")(11, \"tr\")(12, \"td\");\n      i0.ɵɵtext(13, \"Total Items\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"td\", 7);\n      i0.ɵɵtext(15);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"tr\")(17, \"td\");\n      i0.ɵɵtext(18, \"Total Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"td\", 8);\n      i0.ɵɵtext(20);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"tr\")(22, \"td\");\n      i0.ɵɵtext(23, \"Shipping Charges\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(24, \"td\", 8);\n      i0.ɵɵtext(25);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"tr\")(27, \"td\");\n      i0.ɵɵtext(28, \"Discount\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"td\", 9);\n      i0.ɵɵtext(30);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(31, \"tr\")(32, \"td\");\n      i0.ɵɵtext(33, \"You Have to Pay\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"td\", 9);\n      i0.ɵɵtext(35);\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(36, \"div\", 10)(37, \"h4\");\n      i0.ɵɵtext(38, \"Cart Items\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"div\", 11);\n      i0.ɵɵtemplate(40, CartComponent_div_40_Template, 5, 2, \"div\", 12);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(41, \"div\", 13)(42, \"h3\", 14);\n      i0.ɵɵtext(43, \"Previous Carts\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(44, CartComponent_div_44_Template, 16, 7, \"div\", 15);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(15);\n      i0.ɵɵtextInterpolate1(\" \", ctx.usersCart.cartItems.length, \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", ctx.userPaymentInfo.totalAmount, \"$ \");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\", ctx.userPaymentInfo.shipingCharges, \" $\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\", ctx.userPaymentInfo.amountReduced, \"$ \");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\", ctx.userPaymentInfo.amountPaid, \"$ \");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngForOf\", ctx.usersCart.cartItems);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.usersPreviousCarts);\n    }\n  },\n  dependencies: [i4.NgForOf, i5.RouterLink, i6.ProductComponent, i4.DatePipe],\n  styles: [\".my-container[_ngcontent-%COMP%] {\\r\\n  max-width: 100%;\\r\\n}\\r\\n\\r\\n.my-shadow[_ngcontent-%COMP%] {\\r\\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.my-rounded-corner[_ngcontent-%COMP%] {\\r\\n  border-radius: 1rem;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FydC9jYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsMkNBQTJDO0FBQzdDOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCIiwic291cmNlc0NvbnRlbnQiOlsiLm15LWNvbnRhaW5lciB7XHJcbiAgbWF4LXdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4ubXktc2hhZG93IHtcclxuICBib3gtc2hhZG93OiAwcHggMHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjMpO1xyXG59XHJcblxyXG4ubXktcm91bmRlZC1jb3JuZXIge1xyXG4gIGJvcmRlci1yYWRpdXM6IDFyZW07XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","CartComponent","constructor","navigationService","userAuthentication","cartService","id","user","getUser","cartItems","ordered","orderedOn","paymentMethod","type","provider","available","reason","totalAmount","shipingCharges","amountReduced","amountPaid","createdAt","ngOnInit","getActiveCartOfUser","subscribe","res","usersCart","calculatePayment","userPaymentInfo","getAllPreviousCarts","usersPreviousCarts","deleteCartItem","cartItemId","response","console","log","error","window","location","reload","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\tamar\\Desktop\\ECommerce\\ECommerceFront\\src\\app\\cart\\cart.component.html","C:\\Users\\tamar\\Desktop\\ECommerce\\ECommerceFront\\src\\app\\cart\\cart.component.ts"],"sourcesContent":["<div class=\"my-container mx-auto border border-dark py-5\">\n  <div class=\"p-4 border my-rounded-corner\">\n    <h2 class=\"py-2 d-flex justify-content-center align-items-center\"> <b>Current Cart</b></h2>\n    <div class=\"mt-5\">\n      <div class=\"d-grid w-50 mx-auto mb-3\">\n        <button class=\"btn btn-outline-success fs-4\" type=\"button\" routerLink=\"/orders\">Order</button>\n      </div>\n      <table class=\"table w-50 mx-auto table-border table-hover my-shadow\">\n        <tbody>\n          <tr>\n            <td>Total Items</td>\n            <td class=\"fs-5 fw-bold\"> {{usersCart.cartItems.length}}</td>\n          </tr>\n          <tr>\n            <td>Total Price</td>\n            <td class=\"fs-5 fw-bold text-danger\"> {{userPaymentInfo.totalAmount}}$ </td>\n          </tr>\n          <tr>\n            <td>Shipping Charges</td>\n            <td class=\"fs-5 fw-bold text-danger\">{{userPaymentInfo.shipingCharges}} $</td>\n          </tr>\n          <tr>\n            <td>Discount</td>\n            <td class=\"fs-5 fw-bold text-success\">{{userPaymentInfo.amountReduced}}$ </td>\n          </tr>\n          <tr>\n            <td>You Have to Pay</td>\n            <td class=\"fs-5 fw-bold text-success\">{{userPaymentInfo.amountPaid}}$ </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class=\"current-cart-items w-75 mx-auto mt-5\">\n      <h4>Cart Items</h4>\n      <div class=\"row mt-4 g-0 product\">\n\n        <!-- <div class=\"col-6 py-3 px-2\" *ngFor=\"let cartItem of usersCart.cartItems\">\n            <div class=\"text-end\">\n              <button class=\"btn btn-danger \" (click)=\"deleteCartItem(cartItem.id)\">DELETE</button>\n            </div>\n            <app-product [view]=\"'currcartitem'\" [product]=\"cartItem.product\"></app-product>\n        </div> -->\n\n        <div class=\"col-6 py-3 px-2 \" *ngFor=\"let cartItem of usersCart.cartItems\">\n          <div class=\"d-flex justify-content-between align-items-start\">\n            <app-product [view]=\"'currcartitem'\" [product]=\"cartItem.product\"></app-product>\n             <button class=\"btn m-0 p-0\" (click)=\"deleteCartItem(cartItem.id)\"><i class=\"bi bi-trash3\"></i></button>\n          </div>\n        </div>\n\n\n      </div>\n    </div>\n  </div>\n\n\n  <div class=\"mt-5 p-4 border my-rounded-corner \">\n    <h3 class=\"w-25 border text-center py-2 mb-5 my-rounded-corner \">Previous Carts</h3>\n    <div class=\"card mb-5\" *ngFor=\"let cart of usersPreviousCarts\">\n      <div class=\"card-header d-flex fw-bold justify-content-between align-items-center\">\n        <span class=\"time\">Ordered On :\n          <span class=\"fs-5\">{{cart.orderedOn | date:\"dd-MMM-YYYY\"}}</span>\n        </span>\n        <span class=\"count\">Items: {{cart.cartItems.length}}</span>\n        <span class=\"price\">Price Paid :\n          <span class=\"fs-5\">{{cartService.calculatePrice(cart)}}$ </span>\n        </span>\n      </div>\n\n      <div class=\"card-body px-4 py-2  \">\n        <div class=\"row g-0\">\n          <div class=\"col-2 px-2 py-2\" *ngFor=\"let cartItem of cart.cartItems\">\n            <app-product [view]=\"'prevcartitem'\" [product]=\"cartItem.product\"></app-product>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component } from '@angular/core';\nimport { Cart } from '../models/cart';\nimport { Payment } from '../models/payment';\nimport { NavigationService } from '../services/navigation.service';\nimport { Router } from '@angular/router';\nimport { UserAuthenticationService } from '../services/user-authentication.service';\nimport { CartService } from '../services/cart.service';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent {\n  usersCart: Cart = {\n    id: 0,\n    user: this.userAuthentication.getUser(),\n    cartItems: [],\n    ordered: false,\n    orderedOn: ''\n  }\n\n  userPaymentInfo: Payment = {\n    id: 0,\n    user: this.userAuthentication.getUser(),\n    paymentMethod: {\n      id: 0,\n      type: '',\n      provider: '',\n      available: false,\n      reason: ''\n    },\n    totalAmount: 0,\n    shipingCharges: 0,\n    amountReduced: 0,\n    amountPaid: 0,\n    createdAt: ''\n  }\n  usersPreviousCarts: Cart[] = [];\n  data: any;\n\n  constructor(\n    public navigationService: NavigationService,\n    public userAuthentication: UserAuthenticationService,\n    public cartService: CartService\n  ) { }\n\n\n  ngOnInit(): void {\n\n    // getcart\n    this.navigationService.getActiveCartOfUser(this.userAuthentication.getUser().id)\n      .subscribe((res: any) => {\n        this.usersCart = res;\n\n        // calculate payment\n        this.cartService.calculatePayment(\n          this.usersCart, this.userPaymentInfo\n        )\n      });\n    // get previus carts\n    this.navigationService.getAllPreviousCarts(this.userAuthentication.getUser().id)\n      .subscribe((res: any) => {\n        this.usersPreviousCarts = res;\n      })\n  }\n\n  deleteCartItem(cartItemId: number): void {\n    this.navigationService.deleteCartItem(cartItemId).subscribe(\n      (response) => {\n        console.log(response);\n      },\n      (error) => {\n        console.error(error);\n      }\n    );\n    window.location.reload();\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}