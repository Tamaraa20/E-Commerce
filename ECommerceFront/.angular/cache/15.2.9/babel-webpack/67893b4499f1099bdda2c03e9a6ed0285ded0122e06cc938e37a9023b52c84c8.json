{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/navigation.service\";\nimport * as i2 from \"../services/user-authentication.service\";\nimport * as i3 from \"../services/cart.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../product/product.component\";\nfunction CartComponent_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 23)(1, \"div\", 24);\n    i0.ɵɵelement(2, \"app-product\", 25);\n    i0.ɵɵelementStart(3, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function CartComponent_div_14_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const cartItem_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.deleteCartItem(cartItem_r3.id));\n    });\n    i0.ɵɵelementStart(4, \"h2\");\n    i0.ɵɵelement(5, \"i\", 27);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const cartItem_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"view\", \"currcartitem\")(\"product\", cartItem_r3.product);\n  }\n}\nfunction CartComponent_h1_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\", 28)(1, \"b\");\n    i0.ɵɵtext(2, \"Previous Carts\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction CartComponent_div_54_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵelement(1, \"app-product\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cartItem_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"view\", \"prevcartitem\")(\"product\", cartItem_r8.product);\n  }\n}\nfunction CartComponent_div_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29)(1, \"div\", 30)(2, \"span\", 31);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 32);\n    i0.ɵɵtext(5, \"Price Paid : \");\n    i0.ɵɵelementStart(6, \"span\", 33);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"div\", 34)(9, \"div\", 35);\n    i0.ɵɵtemplate(10, CartComponent_div_54_div_10_Template, 2, 2, \"div\", 36);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const cart_r6 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Items: \", cart_r6.cartItems.length, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r2.cartService.calculatePrice(cart_r6), \"$ \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", cart_r6.cartItems);\n  }\n}\nexport class CartComponent {\n  constructor(navigationService, userAuthentication, cartService) {\n    this.navigationService = navigationService;\n    this.userAuthentication = userAuthentication;\n    this.cartService = cartService;\n    this.usersCart = {\n      id: 0,\n      user: this.userAuthentication.getUser(),\n      cartItems: [],\n      ordered: false,\n      orderedOn: ''\n    };\n    this.userPaymentInfo = {\n      id: 0,\n      user: this.userAuthentication.getUser(),\n      paymentMethod: {\n        id: 0,\n        type: '',\n        provider: '',\n        available: false,\n        reason: ''\n      },\n      totalAmount: 0,\n      shipingCharges: 0,\n      amountReduced: 0,\n      amountPaid: 0,\n      createdAt: ''\n    };\n    this.usersPreviousCarts = [];\n  }\n  ngOnInit() {\n    // getcart\n    this.navigationService.getActiveCartOfUser(this.userAuthentication.getUser().id).subscribe(res => {\n      this.usersCart = res;\n      // calculate payment\n      this.cartService.calculatePayment(this.usersCart, this.userPaymentInfo);\n    });\n    // get previus carts\n    this.navigationService.getAllPreviousCarts(this.userAuthentication.getUser().id).subscribe(res => {\n      this.usersPreviousCarts = res;\n    });\n  }\n  deleteCartItem(cartItemId) {\n    this.navigationService.deleteCartItem(cartItemId).subscribe(response => {\n      console.log(response);\n    }, error => {\n      console.error(error);\n    });\n    window.location.reload();\n  }\n}\n_class = CartComponent;\n_class.ɵfac = function CartComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.NavigationService), i0.ɵɵdirectiveInject(i2.UserAuthenticationService), i0.ɵɵdirectiveInject(i3.CartService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-cart\"]],\n  decls: 55,\n  vars: 8,\n  consts: [[1, \"my-container\", \"mx-auto\", \"border\", \"border-dark\", \"py-5\"], [1, \"container\"], [1, \"row\"], [1, \"col\", \"d-flex\", \"justify-content-center\"], [1, \"pt-4\", \"text-center\"], [1, \"row\", \"m-auto\"], [1, \"col-lg-7\", \"col\"], [1, \"current-cart-items\", \"w-100\", \"mx-auto\", \"mt-5\"], [1, \"txt\", \"p-3\", \"text-center\", \"text-dark\"], [1, \"row\", \"mt-4\", \"g-0\", \"product\"], [\"class\", \"col py-3 px-2\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"routerLink\", \"/home\", 1, \"btn\", \"btn-primary\", \"fs-5\"], [1, \"col\", \"py-5\"], [1, \"table\", \"w-75\", \"mx-auto\", \"table-border\", \"table-hover\", \"my-shadow\", \"d-flex\", \"justify-content-center\"], [1, \"d-grid\", \"mx-auto\", \"text-center\"], [1, \"fs-5\", \"fw-bold\"], [1, \"fs-5\", \"fw-bold\", \"text-danger\"], [1, \"fs-5\", \"fw-bold\", \"text-primary\"], [1, \"d-grid\", \"mx-auto\", \"w-75\"], [\"type\", \"button\", \"routerLink\", \"/orders\", 1, \"btn\", \"btn-primary\", \"fs-4\"], [1, \"mt-5\", \"py-4\"], [\"class\", \"w-100 text-center py-2 my-5 \", 4, \"ngIf\"], [\"class\", \"card mb-5\", 4, \"ngFor\", \"ngForOf\"], [1, \"col\", \"py-3\", \"px-2\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-start\"], [3, \"view\", \"product\"], [1, \"btn\", \"m-0\", \"p-0\", 3, \"click\"], [1, \"bi\", \"bi-x-square\"], [1, \"w-100\", \"text-center\", \"py-2\", \"my-5\"], [1, \"card\", \"mb-5\"], [1, \"card-header\", \"d-flex\", \"fw-bold\", \"justify-content-between\", \"align-items-center\", \"bg-primary\", \"text-light\"], [1, \"count\"], [1, \"price\"], [1, \"fs-5\"], [1, \"card-body\", \"px-4\", \"py-2\"], [1, \"row\", \"g-0\"], [\"class\", \"col-lg-2 col-sm-3 col-md-3 px-2 py-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-2\", \"col-sm-3\", \"col-md-3\", \"px-2\", \"py-2\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\", 4)(5, \"b\");\n      i0.ɵɵtext(6, \"YOUR CART\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6)(9, \"div\", 7)(10, \"h3\", 8)(11, \"b\");\n      i0.ɵɵtext(12, \" Cart Items\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"div\", 9);\n      i0.ɵɵtemplate(14, CartComponent_div_14_Template, 6, 2, \"div\", 10);\n      i0.ɵɵelementStart(15, \"button\", 11);\n      i0.ɵɵtext(16, \"Continue shopping\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(17, \"div\", 12)(18, \"table\", 13)(19, \"tbody\")(20, \"div\", 14)(21, \"h3\")(22, \"b\");\n      i0.ɵɵtext(23, \" Order\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(24, \"tr\")(25, \"td\");\n      i0.ɵɵtext(26, \"Total Items\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"td\", 15);\n      i0.ɵɵtext(28);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"tr\")(30, \"td\");\n      i0.ɵɵtext(31, \"Total Price\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"td\", 16);\n      i0.ɵɵtext(33);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(34, \"tr\")(35, \"td\");\n      i0.ɵɵtext(36, \"Shipping Charges\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"td\", 16);\n      i0.ɵɵtext(38);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(39, \"tr\")(40, \"td\");\n      i0.ɵɵtext(41, \"Discount\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(42, \"td\", 17);\n      i0.ɵɵtext(43);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(44, \"tr\")(45, \"td\");\n      i0.ɵɵtext(46, \"You Have to Pay\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"td\", 17);\n      i0.ɵɵtext(48);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(49, \"div\", 18)(50, \"button\", 19);\n      i0.ɵɵtext(51, \"Order now\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(52, \"div\", 20);\n      i0.ɵɵtemplate(53, CartComponent_h1_53_Template, 3, 0, \"h1\", 21);\n      i0.ɵɵtemplate(54, CartComponent_div_54_Template, 11, 3, \"div\", 22);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(14);\n      i0.ɵɵproperty(\"ngForOf\", ctx.usersCart.cartItems);\n      i0.ɵɵadvance(14);\n      i0.ɵɵtextInterpolate(ctx.usersCart.cartItems.length);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\", ctx.userPaymentInfo.totalAmount, \"$\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\", ctx.userPaymentInfo.shipingCharges, \"$\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\", ctx.userPaymentInfo.amountReduced, \"$\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\", ctx.userPaymentInfo.amountPaid, \"$\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.usersCart);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.usersPreviousCarts);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.RouterLink, i6.ProductComponent],\n  styles: [\".my-container[_ngcontent-%COMP%] {\\r\\n  max-width: 100%;\\r\\n}\\r\\n\\r\\n.my-shadow[_ngcontent-%COMP%] {\\r\\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);\\r\\n}\\r\\n\\r\\n.my-rounded-corner[_ngcontent-%COMP%] {\\r\\n  border-radius: 1rem;\\r\\n}\\r\\n\\r\\n.table[_ngcontent-%COMP%]{\\r\\n  background: white;\\r\\n}\\r\\n\\r\\n.txt[_ngcontent-%COMP%]{\\r\\n  \\r\\n   color: white;\\r\\n  \\r\\nborder-radius: 5px;\\r\\n\\r\\n}\\r\\n\\r\\n.current-cart-items[_ngcontent-%COMP%]{\\r\\n  background-color: white;\\r\\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.3);\\r\\n  border-radius: 1rem;\\r\\n}\\r\\n\\r\\n.order[_ngcontent-%COMP%]{\\r\\n\\r\\n  border-radius: 1rem;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FydC9jYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsMkNBQTJDO0FBQzdDOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0UsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsNkJBQTZCO0dBQzVCLFlBQVk7RUFDYixrQkFBa0I7QUFDcEIsa0JBQWtCOztBQUVsQjs7QUFFQTtFQUNFLHVCQUF1QjtFQUN2QiwyQ0FBMkM7RUFDM0MsbUJBQW1CO0FBQ3JCOztBQUVBOztFQUVFLG1CQUFtQjtBQUNyQiIsInNvdXJjZXNDb250ZW50IjpbIi5teS1jb250YWluZXIge1xyXG4gIG1heC13aWR0aDogMTAwJTtcclxufVxyXG5cclxuLm15LXNoYWRvdyB7XHJcbiAgYm94LXNoYWRvdzogMHB4IDBweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcclxufVxyXG5cclxuLm15LXJvdW5kZWQtY29ybmVyIHtcclxuICBib3JkZXItcmFkaXVzOiAxcmVtO1xyXG59XHJcblxyXG4udGFibGV7XHJcbiAgYmFja2dyb3VuZDogd2hpdGU7XHJcbn1cclxuXHJcbi50eHR7XHJcbiAgLyogYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7ICovXHJcbiAgIGNvbG9yOiB3aGl0ZTtcclxuICAvKiBjb2xvcjogYmxhY2s7ICovXHJcbmJvcmRlci1yYWRpdXM6IDVweDtcclxuXHJcbn1cclxuXHJcbi5jdXJyZW50LWNhcnQtaXRlbXN7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgYm94LXNoYWRvdzogMHB4IDBweCAxMHB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcclxuICBib3JkZXItcmFkaXVzOiAxcmVtO1xyXG59XHJcblxyXG4ub3JkZXJ7XHJcblxyXG4gIGJvcmRlci1yYWRpdXM6IDFyZW07XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","CartComponent","constructor","navigationService","userAuthentication","cartService","id","user","getUser","cartItems","ordered","orderedOn","paymentMethod","type","provider","available","reason","totalAmount","shipingCharges","amountReduced","amountPaid","createdAt","ngOnInit","getActiveCartOfUser","subscribe","res","usersCart","calculatePayment","userPaymentInfo","getAllPreviousCarts","usersPreviousCarts","deleteCartItem","cartItemId","response","console","log","error","window","location","reload","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\tamar\\Desktop\\ECommerce\\ECommerceFront\\src\\app\\cart\\cart.component.html","C:\\Users\\tamar\\Desktop\\ECommerce\\ECommerceFront\\src\\app\\cart\\cart.component.ts"],"sourcesContent":["<div class=\"my-container mx-auto border border-dark py-5 \">\n\n  <div class=\"container \">\n    <div class=\"row\">\n      <div class=\"col d-flex justify-content-center \">\n        <h1 class=\"pt-4 text-center\"><b>YOUR CART</b></h1>\n    </div>\n    <div class=\"row m-auto\">\n\n      <div class=\"col-lg-7 col\">\n\n        <div class=\"current-cart-items w-100 mx-auto mt-5\">\n          <h3 class=\"txt p-3 text-center text-dark \"><b> Cart Items</b></h3>\n          <div class=\"row mt-4 g-0 product\">\n            <div class=\"col py-3 px-2\" *ngFor=\"let cartItem of usersCart.cartItems\">\n              <div class=\"d-flex justify-content-between align-items-start\">\n                <app-product [view]=\"'currcartitem'\" [product]=\"cartItem.product\"></app-product>\n                <button class=\"btn m-0 p-0\" (click)=\"deleteCartItem(cartItem.id)\">\n                  <h2><i class=\"bi bi-x-square\"></i></h2>\n                </button>\n              </div>\n            </div>\n            <button class=\"btn btn-primary fs-5\" type=\"button\" routerLink=\"/home\">Continue shopping</button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"col py-5\">\n        <table class=\"table w-75 mx-auto table-border table-hover my-shadow d-flex justify-content-center \">\n\n          <tbody>\n            <div class=\"d-grid mx-auto text-center\">\n              <h3> <b> Order</b></h3>\n            </div>\n            <tr>\n              <td>Total Items</td>\n              <td class=\"fs-5 fw-bold\">{{usersCart.cartItems.length}}</td>\n            </tr>\n            <tr>\n              <td>Total Price</td>\n              <td class=\"fs-5 fw-bold text-danger\">{{userPaymentInfo.totalAmount}}$</td>\n            </tr>\n            <tr>\n              <td>Shipping Charges</td>\n              <td class=\"fs-5 fw-bold text-danger\">{{userPaymentInfo.shipingCharges}}$</td>\n            </tr>\n            <tr>\n              <td>Discount</td>\n              <td class=\"fs-5 fw-bold text-primary\">{{userPaymentInfo.amountReduced}}$</td>\n            </tr>\n            <tr>\n              <td>You Have to Pay</td>\n              <td class=\"fs-5 fw-bold text-primary\">{{userPaymentInfo.amountPaid}}$</td>\n            </tr>\n          </tbody>\n        </table>\n        <div class=\"d-grid mx-auto w-75 \">\n          <button class=\"btn btn-primary fs-4\" type=\"button\" routerLink=\"/orders\">Order now</button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n\n  <div class=\"mt-5 py-4  \">\n    <h1 class=\"w-100 text-center py-2 my-5 \" *ngIf=\"usersCart\" > <b>Previous Carts</b></h1>\n    <div class=\"card mb-5\" *ngFor=\"let cart of usersPreviousCarts\">\n\n      <div class=\"card-header d-flex fw-bold justify-content-between align-items-center bg-primary text-light\">\n        <span class=\"count\">Items: {{cart.cartItems.length}}</span>\n        <span class=\"price\">Price Paid :\n          <span class=\"fs-5\">{{cartService.calculatePrice(cart)}}$ </span>\n        </span>\n      </div>\n\n\n      <div class=\"card-body px-4 py-2  \">\n        <div class=\"row g-0\">\n          <div class=\"col-lg-2 col-sm-3 col-md-3 px-2 py-2\" *ngFor=\"let cartItem of cart.cartItems\">\n            <app-product [view]=\"'prevcartitem'\" [product]=\"cartItem.product\"></app-product>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n<!-- </div> -->\n","import { Component } from '@angular/core';\nimport { Cart } from '../models/cart';\nimport { Payment } from '../models/payment';\nimport { NavigationService } from '../services/navigation.service';\nimport { Router } from '@angular/router';\nimport { UserAuthenticationService } from '../services/user-authentication.service';\nimport { CartService } from '../services/cart.service';\n\n@Component({\n  selector: 'app-cart',\n  templateUrl: './cart.component.html',\n  styleUrls: ['./cart.component.css']\n})\nexport class CartComponent {\n  usersCart: Cart = {\n    id: 0,\n    user: this.userAuthentication.getUser(),\n    cartItems: [],\n    ordered: false,\n    orderedOn: ''\n  }\n\n  userPaymentInfo: Payment = {\n    id: 0,\n    user: this.userAuthentication.getUser(),\n    paymentMethod: {\n      id: 0,\n      type: '',\n      provider: '',\n      available: false,\n      reason: ''\n    },\n    totalAmount: 0,\n    shipingCharges: 0,\n    amountReduced: 0,\n    amountPaid: 0,\n    createdAt: ''\n  }\n  usersPreviousCarts: Cart[] = [];\n  data: any;\n\n  constructor(\n    public navigationService: NavigationService,\n    public userAuthentication: UserAuthenticationService,\n    public cartService: CartService\n  ) { }\n\n\n  ngOnInit(): void {\n\n    // getcart\n    this.navigationService.getActiveCartOfUser(this.userAuthentication.getUser().id)\n      .subscribe((res: any) => {\n        this.usersCart = res;\n\n        // calculate payment\n        this.cartService.calculatePayment(\n          this.usersCart, this.userPaymentInfo\n        )\n      });\n    // get previus carts\n    this.navigationService.getAllPreviousCarts(this.userAuthentication.getUser().id)\n      .subscribe((res: any) => {\n        this.usersPreviousCarts = res;\n      })\n  }\n\n  deleteCartItem(cartItemId: number): void {\n    this.navigationService.deleteCartItem(cartItemId).subscribe(\n      (response) => {\n        console.log(response);\n      },\n      (error) => {\n        console.error(error);\n      }\n    );\n    window.location.reload();\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}